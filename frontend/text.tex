<form enctype="multipart/form-data" (ngSubmit)="onSubmit()" [formGroup]="productForm">
    <div class="container mx-auto mt-10 px-5">
      <div class="flex items-center justify-between">
       <div class="flex items-center space-x-2">
        <div class="h-10 rounded-md w-10 flex items-center justify-center border">
          <i class='bx bx-left-arrow-alt text-xl text-gray-500'></i>
        </div>
        <p class="text-2xl">Add New Product</p>
       </div>
        <div class="">
          <button (click)="goToDetails()" type="button" 
            class="w-full bg-emerald-600 px-6 text-sm  hover:bg-blue-700 text-white font-semibold py-1 ">
            Go on Details
          </button>
        </div>
      </div>
  
      <div class="grid grid-cols-1 md:grid-cols-7 gap-2 mt-1">
        <div class="flex flex-col gap-1 md:px-10 py-4 col-span-1 md:col-span-4 rounded-md shadow-sm">
          <!-- Product Name Field -->
          <div class="flex flex-col justify-center space-y-1 mt-5">
            <p class="text-[14px] md:text-[16px]">Product Name</p>
            <input placeholder="Please enter the product name accurately..." type="text" formControlName="name"
              class="px-4 text-[12px] rounded-md outline-none py-2 border bg-[#ffffff]" required />
          </div>
  
          <!-- Product Description Field -->
          <div class="flex flex-col justify-center space-y-1 mt-5">
            <label class="text-[14px] md:text-[16px]" for="description">Product Description</label>
            <textarea id="descriptionEn" formControlName="description"
              class="bg-[#ffffff] border text-[15px] outline-none rounded-md "
              placeholder="Enter a detailed description of the product..."
              style="padding-top: 0.5rem; padding-left: 1rem;" maxlength="500"></textarea>
          </div>
  
          <!-- Stock and Brand Fields -->
          <div class="flex flex-col md:flex-row items-center mt-2 border py-5 rounded-md">
            <div class="w-full md:basis-1/2 mx-2 flex flex-col justify-center space-y-1 mt-2">
              <p class="font-semibold text-[14px]">Stock Quantity</p>
              <span class="text-[10px] text-gray-400">Available stock quantity</span>
              <input placeholder="Please enter the available stock quantity" type="number" min="0"
                formControlName="stockQuantity" class="px-4 text-[12px] rounded-md outline-none py-2 bg-[#eeeeee]"
                required />
            </div>
  
            <div class="w-full md:basis-1/2 mx-2 flex flex-col justify-center space-y-1 mt-5">
              <p class="font-semibold text-[14px]">Brand</p>
              <span class="text-[10px] text-gray-400">Available brand</span>
              <input placeholder="Please enter the brand name, e.g., 'Samsung'" type="text" formControlName="brand"
                class="px-4 text-[12px] rounded-md outline-none py-2 border bg-[#ffffff]" required />
            </div>
          </div>
  
          <!-- Pricing Fields -->
          <div class=" border rounded-md p-4">
            <h3 class="text-xl font-thin mb-4">Manage Pricing</h3>
            <div class="flex flex-col space-y-4">
              <!-- Regular Price and Discount -->
              <div class="flex flex-col md:flex-row md:items-center">
                <div class="flex flex-col w-full md:basis-1/2 md:mx-2">
                  <label class="text-[14px] my-2" for="regular-price">Regular Price</label>
                  <input id="regular-price" placeholder="Please enter the regular price of the product" type="number"
                    min="0" formControlName="price"
                    class="px-4 text-[12px] rounded-md outline-none py-2 border bg-[#ffffff]" required />
                </div>
                <div class="flex flex-col w-full md:basis-1/2">
                  <label class="text-[14px] my-2" for="discount">Discount Percentage (%)</label>
                  <input id="discount" placeholder="Please enter the discount percentage" type="number" min="0" max="100"
                    formControlName="discount"
                    class="px-4 text-[12px] rounded-md outline-none py-2 border bg-[#ffffff]" />
                </div>
              </div>
  
              <div class="flex flex-col">
                <label class="text-[14px] my-2" for="offer-start-date">Offer Start Date</label>
                <input id="offer-start-date" type="date" formControlName="offerStartDate"
                  class="px-4 text-[12px] rounded-md outline-none py-2 border bg-[#ffffff]" />
              </div>
  
              <div class="flex flex-col">
                <label class="text-[14px] my-2" for="offer-end-date">Offer End Date</label>
                <input id="offer-end-date" type="date" formControlName="offerEndDate"
                  class="px-4 text-[12px] rounded-md outline-none py-2 border bg-[#ffffff]" />
              </div>
            </div>
          </div>
        </div>
  
        <!-- Image Upload and Category Selection -->
        <div class="col-span-1 md:col-span-3 py-3">
          <!-- Main Image Upload -->
          <div *ngIf="!productForm.get('ImageFile')?.value" class="flex justify-center w-full">
            <label for="dropzone-file"
              class="flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer">
              <div class="flex flex-col items-center justify-center pt-5 pb-6">
                <svg class="w-8 h-8 mb-4 text-blue-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                  viewBox="0 0 20 16">
                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2" />
                </svg>
                <p class="mb-2 text-sm text-gray-900">
                  <span class="font-semibold">Click to upload</span> or drag and drop
                </p>
                <p class="text-xs text-gray-600">SVG, PNG, JPG or GIF (MAX. 800x400px)</p>
              </div>
              <input id="dropzone-file" type="file" class="hidden" accept="image/*" (change)="onFileSelected($event)" />
            </label>
          </div>
  
          <!-- Image Preview -->
          <div *ngIf="productForm.get('ImageFile')?.value" class="mt-4 flex flex-col relative">
            <i class='bx bx-refresh text-2xl text-emerald-800 mx-3 cursor-pointer' (click)="clearImagePreview()"></i>
            <div class="w-full flex justify-center">
              <img [src]="selectedImage" class="rounded-md mainImage cursor-pointer" alt="Image Preview" />
            </div>
          </div>
  
          <!-- Thumbnail Previews -->
          <div *ngIf="productForm.get('ImageFile')?.value" class="mt-4 flex flex-wrap">
            <div *ngFor="let thumbnail of thumbnailUrls" class="mt-2">
              <img [src]="thumbnail" class="w-20 h-20 rounded-md" alt="Thumbnail Preview" />
            </div>
            <div class="flex items-center justify-center flex-row-reverse">
              <label for="dropzone-file"
                class="flex flex-col items-center justify-center w-14 h-14 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50">
                <div class="flex flex-col items-center justify-center pt-5 pb-6">
                  <i class="bx bx-plus text-3xl"></i>
                </div>
                <input id="dropzone-file" type="file" class="hidden" accept="image/*" (change)="setSubImage($event)" />
              </label>
            </div>
          </div>
  
          <div class="bg-[#f9f9f9] px-3 py-3 mt-5 rounded-md">
            <div class="px-2">
              <p class="font-thin py-1">Product Category</p>
              <select formControlName="categoryId" class="border rounded-md w-full bg-[#ffffff] px-3 py-2">
                <option *ngFor="let category of categories" [value]="category.id">{{ category.categoryName }}</option>
              </select>
            </div>
          </div>
  
          <div class="flex flex-col bg-[#f9f9f9] px-3 py-3  justify-center space-y-1 mt-5">
            <p class="text-[14px] md:text-[16px]">Delivery Time In Days</p>
            <input formControlName="DeliveryTimeInDays" placeholder="Please enter the Delivery Time In Days " type="number" 
              class="px-4 text-[12px] rounded-md outline-none py-2 border bg-[#ffffff]" required />
          </div>
          <div class="flex  flex-col ">
            <!-- Weight -->
            <div class="w-full mx-2 flex flex-col justify-center space-y-1 mt-2">
              <p class="font-semibold text-[14px]">Weight</p>
              <span class="text-[10px] text-gray-400">
                Weight in kg (e.g., 1.5)
              </span>
              <input placeholder="Enter product weight" type="number" min="0" step="0.01" formControlName="Weight"
                class="px-4 w-full text-[12px] rounded-md outline-none py-2 bg-[#eeeeee]" required>
            </div>
        
        
            <!-- Dimensions (Length, Width, Height) -->
            <div class="w-full  mx-2 flex flex-col justify-center space-y-1 mt-2">
              <p class="font-semibold text-[14px]">Dimensions</p>
              <span class="text-[10px] text-gray-400">
                Enter dimensions in cm (Length x Width x Height)
              </span>
        
        
              <div class="flex flex-col  gap-1 flex-shrink">
                <!-- Length -->
                <input placeholder="Length (cm)" type="number" min="0" step="0.1" formControlName="length"
                  class="px-4 w-full md:w-auto text-[12px] rounded-md outline-none py-2 bg-[#eeeeee] my-1" required>
                <!-- Width -->
                <input placeholder="Width (cm)" type="number" min="0" step="0.1" formControlName="width"
                  class="px-4 w-full md:w-auto text-[12px] rounded-md outline-none py-2 bg-[#eeeeee] my-1" required>
                <!-- Height -->
                <input placeholder="Height (cm)" type="number" min="0" step="0.1" formControlName="height"
                  class="px-4 w-full md:w-auto text-[12px] rounded-md outline-none py-2 bg-[#eeeeee] my-1" required>
              </div>
            </div>
          </div>
        </div>
      </div>
              
<form class="px-12 py-5 mt-5 container mx-auto" [formGroup]="productForm">
	
	<div class="container mx-auto mt-5">
		<div class="flex items-center md:flex-row flex-col py-3 md:my-5">
			<div class="flex flex-col space-x-1 justify-center">
				<span class="text-[10px] px-2 text-gray-400">Be careful! should be meaningful, like "Color" , "CPU" or
					"Size".</span>
				<h3 class=" text-2xl font-thin">
					Attribute Properties
				</h3>
			</div>
		</div>
		<div class="flex md:flex-row flex-col items-center">
			<!-- Attribute Name -->
			<div class="w-full md:w-[40%] mx-2 flex flex-col justify-center space-y-1 mt-2">
				<label for="attributeName" class="font-semibold text-[14px]">
					Attribute Name
				</label>
				<span class="text-[10px] text-gray-400">
					Enter attribute name (2-100 characters)
				</span>
				<input id="attributeName" placeholder="Enter attribute name" type="text" formControlName="attributeName"
					class="px-4 text-[12px] rounded-md outline-none py-2 bg-[#eeeeee]" minlength="3" maxlength="100"
					required>
			</div>


			<!-- Attribute Value -->
			<div class="w-full md:w-[40%] mx-2 flex flex-col justify-center space-y-1 mt-2">
				<label for="attributeValue" class="font-semibold text-[14px]">
					Attribute Value
				</label>
				<span class="text-[10px] text-gray-400">
					Enter attribute value (1-255 characters)
				</span>
				<input id="attributeValue" placeholder="Enter attribute value" type="text"
					formControlName="attributeValue" class="px-4 text-[12px] rounded-md outline-none py-2 bg-[#eeeeee]"
					minlength="2" maxlength="255" required>
          
			</div>
			<!-- buuton is save attribute -->
			<button  class=" w-full md:w-auto px-5 py-1  mt-12 bg-blue-500 text-white text-sm">Add attribute</button>
		</div>

	</div>
</form>
    </div>
  </form>









  import { Component, inject, OnDestroy, OnInit } from '@angular/core';
import { FormBuilder, FormGroup, FormControl, Validators } from '@angular/forms';
import { map, Subject, takeUntil } from 'rxjs';
import { ICategory } from '../../../../../core/models/interfaces/ICategory';
import { CategoryService } from '../../../../../core/services/Category/Category.service';
import { ProductService } from '../../../../../core/services/Product.service';
import { Router } from '@angular/router';
import { ProductDataService } from '../../../../../core/services/ProductData.service';

@Component({
  selector: 'app-add-product',
  templateUrl: './product-form.component.html',
  styleUrls: ['./product-form.component.css']
})
export class ProductFormComponent implements OnInit, OnDestroy {
  productForm!: FormGroup;
  thumbnailUrls: (string | ArrayBuffer | null)[] = [];
  thumbnailFiles: (File | null)[] = []; // Array to hold thumbnail image URLs
  selectedImage: string | ArrayBuffer | null = null; // Property to hold the image URL
  categories!: ICategory[]
  private productDataService = inject(ProductDataService)
  private destroy$ = new Subject<void>();
  private categoryService = inject(CategoryService);
  private productService = inject(ProductService);
  router = inject(Router);
  constructor(private fb: FormBuilder) { }

  ngOnInit(): void {
    this.initialControlWithinFormGroup();
    this.categoryService.getAllCategories().pipe(
      map(response => {
        if (response != null) {
          this.categories = response;
          console.log(response);
        }
      }),
      takeUntil(this.destroy$)
    ).subscribe();
  }

  ngOnDestroy(): void {
    this.destroy$.next();
    this.destroy$.complete();
  }

  setCategory(categoryId: number): void {
    this.productForm.get('categoryId')?.setValue(categoryId); // Set the category ID in the form
  }

  // Declare all form controls
  name!: FormControl;
  description!: FormControl;
  stockQuantity!: FormControl;
  brand!: FormControl;
  price!: FormControl;
  discount!: FormControl;
  offerStartDate!: FormControl;
  offerEndDate!: FormControl;
  ImageFile!: FormControl;
  categoryId!: FormControl;
  deliveryTimeInDays!: FormControl;
  thumbnails!: FormControl;
  // Additional form controls for product attributes
  weight!: FormControl;
  width!: FormControl;
  height!: FormControl;
  length!: FormControl;
  attributeName!: FormControl;
  attributeValue!: FormControl;
  initialControlWithinFormGroup(): void {
    // Initialize form controls within FormGroup
    this.productForm = this.fb.group({
      name: this.name = new FormControl('', Validators.required),
      description: this.description = new FormControl('', Validators.required),
      stockQuantity: this.stockQuantity = new FormControl(null, [Validators.required, Validators.min(1)]),
      brand: this.brand = new FormControl('', Validators.required),
      price: this.price = new FormControl(null, [Validators.required, Validators.min(0)]),
      discount: this.discount = new FormControl(null),
      offerStartDate: this.offerStartDate = new FormControl(null),
      offerEndDate: this.offerEndDate = new FormControl(null),
      ImageFile: this.ImageFile = new FormControl(null),
      categoryId: this.categoryId = new FormControl(null, Validators.required),
      deliveryTimeInDays: this.deliveryTimeInDays = new FormControl(null),
      thumbnails: this.thumbnails = new FormControl([]) ,// Assuming thumbnails is an array

       // Additional product attributes
      weight: this.weight = new FormControl('', Validators.required),
      width: this.width = new FormControl('', Validators.required),
      height: this.height = new FormControl('', Validators.required),
      length: this.length = new FormControl('', Validators.required),
      attributeName: this.attributeName = new FormControl('', Validators.required),
      attributeValue: this.attributeValue = new FormControl('', Validators.required)
    });
  }

  onFileSelected(event: Event): void {
    const input = event.target as HTMLInputElement;
    if (input.files && input.files.length > 0) {
      const selectedImage = input.files[0];
      this.productForm.get('ImageFile')?.setValue(selectedImage); // Store selected file
      const reader = new FileReader();
      reader.onload = (e) => this.selectedImage = e.target?.result ?? null; // Set preview URL
      reader.readAsDataURL(selectedImage); // Read as Data URL
    }
  }

  setSubImage(event: Event): void {
    const input = event.target as HTMLInputElement;
    if (input.files && input.files.length > 0) {
      const newImage = input.files[0];
      this.thumbnailFiles.push(newImage);
      this.productForm.get('thumbnails')?.setValue(this.thumbnailFiles);
      const reader = new FileReader();
      reader.onload = (e) => {
        if (e.target?.result) {
          this.thumbnailUrls.push(e.target.result); // Add to thumbnail URL array
        }
      };
      reader.readAsDataURL(newImage); // Read as Data URL
    }
  }

  clearImagePreview(): void {
    this.productForm.get('ImageFile')?.setValue(null);
    this.selectedImage = null; // Clear the preview as well
  }


  goToDetails() {
    if (this.productForm.valid) {
      const formData: FormData = new FormData();
      const plainData: any = {}; // Object to store form data excluding files

      Object.keys(this.productForm.value).forEach(key => {
        const value = this.productForm.get(key)?.value;
        if (Array.isArray(value)) {
          // If it's an array of files, store file metadata only
          plainData[key] = value.map((file: File) => file.name); // Store only file names or other metadata
        } else {
          formData.append(key, value);
          plainData[key] = value; // Store other form values
        }
      });
      this.productDataService.setFormData(plainData);
      this.router.navigate(['/admin/new-product/attribute']);
    }
  }
  // Handle form submission
  onSubmit(): void {
    if (this.productForm.valid) {
      const formData: FormData = new FormData();
      // Append all form values
      Object.keys(this.productForm.value).forEach(key => {
        const value = this.productForm.get(key)?.value;
        if (Array.isArray(value)) {
          value.forEach((file: File) => formData.append(key, file)); // Append each thumbnail file
        } else {
          formData.append(key, value);
        }
      });

      // Call the service to create the product
      this.productService.createProduct(formData).subscribe({
        next: (response) => {
          console.log('Product created successfully', response);
        },
        error: (err) => {
          console.error('Error creating product', err);
        }
      });
    } else {
      console.error('Form is invalid');
    }
  }
}





















































<section *ngIf="productsGrouped()" class="bg-white latest-offers mt-9 px-4 xs:px-0">
  <h2 class="text-xl lg:text-4xl mb-4 text-center font-[550]">Best Offers</h2>
  <nav
    class="text-[12px] justify-start md:justify-center snap-x snap-mandatory scrollbar-hidden xs:text-[13px] md:text-[15px] flex mb-2 overflow-x-auto overflow-y-hidden scrollbar-hide flex-wrap ml-2">
    <ul class="flex mb-2 border bg-[#eee] rounded-2xl px-2 items-start md:items-center py-1">
      <li *ngFor="let category of productsGrouped(); let i = index" (click)="scrollToImage(i)"
        [ngClass]="{'active': activeIndex() === i}"
        class="snap-center p-1 flex-none mx-2 cursor-pointer border-b-2 border-transparent hover:border-black">
        {{ category.key }}
      </li>
    </ul>
  </nav>

  <div class="flex space-x-20 flex-none overflow-x-auto scrollbar-hidden snap-x snap-mandatory scrollbar-none" #slider>
    <div *ngFor="let category of productsGrouped()" class="flex-none w-full snap-center">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-2 xs:gap-4">
        <div *ngIf="category.items && category.items.length"
          class="border bg-[#f4f4f4] 
          overflow-hidden flex 
          flex-row items-center
          md:col-span-2 md:flex-col rounded-3xl">
        
              <img [src]="'https://images.samsung.com/is/image/samsung/assets/us/home/11012024/SDSAC-8218-S95D-HP-MM-LargeTile-DT-684x684-1.jpg?$684_684_JPG$'" alt="" class="object-contain max-w-md w-[50%] md:w-[80%] h-[100%] md:h-[80%]" />
              <div class="text-center text-[10px] md:text-sm font-semibold px-7 pb-5">
                Save up to $400 with Galaxy Watch Ultra
              </div>
            </div>
         
        

        <!-- Offer Products Section -->
        <div class="col-span-full md:col-span-2 gap-3 grid grid-cols-1 flex-none relative">
          <div class="grid grid-cols-2 gap-2 md:gap-5">
            <div *ngFor="let product of category.items.slice(1)"
              class="max-h-[160px] md:max-h-[230px]  border rounded-3xl bg-white flex flex-col justify-center items-center">
              <img [src]="product.linkImage" alt="" class="object-contain max-w-md w-[70%] h-[50%] md:h-[80%]" />
              <div class="text-center  h-[20%] text-[10px] md:text-sm font-semibold px-7 pb-5">
                Save up to $400 with Galaxy Watch Ultra
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

















































<section *ngIf="productsGrouped()" class="bg-white latest-offers mt-9 px-4 xs:px-0" >
  <h2 class="text-xl lg:text-4xl mb-4 text-center font-[550]">Best Offers</h2>
  <nav
    class="text-[12px] justify-start md:justify-center snap-x snap-mandatory scrollbar-hidden xs:text-[13px] md:text-[15px] flex  mb-2 overflow-x-auto overflow-y-hidden scrollbar-hide flex-wrap  ml-2">
    <ul class="flex mb-2 border bg-[#eee] rounded-2xl px-2  items-start md:items-center py-1">
      <li *ngFor="let category of productsGrouped(); let i = index" (click)="scrollToImage(i)"
        [ngClass]="{'active': activeIndex() === i}"
        class="snap-center p-1 flex-none mx-2 cursor-pointer border-b-2 border-transparent hover:border-black">
        {{ category.key }}
      </li>
    </ul>
  </nav>


  import localeAr from '@angular/common/locales/ar';
  registerLocaleData(localeAr, 'ar'); // Register Arabic locale

  <div class="flex space-x-20  overflow-x-auto scrollbar-hidden snap-x snap-mandatory scrollbar-none" #slider>
    <div *ngFor="let category of productsGrouped()" class="flex-none w-full snap-center">
      <div class=" grid grid-cols-1 md:grid-cols-4 gap-2 xs:gap-4 ">
        <div *ngIf="category.items && category.items.length"
          class="border bg-[#ffffff] overflow-hidden flex flex-row items-center flex-none md:col-span-2 md:flex-col  xs:justify-center rounded-3xl ">
            <div class="w-[75%] max-w-md">
              <img
                [src]="category.items[0].linkImage"
                srcset="
                {{category.items[0].linkImage}} 300w, 
                {{category.items[0].linkImage}} 600w, 
                {{category.items[0].linkImage}} 1000w"
                sizes="(max-width: 600px) 300px, (max-width: 1200px) 600px, 1000px" alt="{{ category.items[0].name }}"
                width="300" height="200" class="mx-auto mb-4 object-fill rounded-3xl w-[90%] md:w-[80%]" loading="lazy" />
            </div>
          <div class="border-l-4 h-full md:h-auto md:border-t-4 text-center md:border-l-0 border-[#eee] w-full flex items-center justify-center text-sm md:text-xl">
            <p class="w-full md:w-[70%] px-4 mt-5 pt-2">Save up to $1,000+ with the new Galaxy Tab SIO Series</p>
          </div>
        </div>

        <!-- Offer Products Section -->
        <div class=" col-span-full md:col-span-2 gap-3 grid grid-cols-1 flex-none  relative">
          <div class="grid grid-cols-2 gap-1 md:gap-5">
            <div *ngFor="let product of category.items" 
             class="border rounded-3xl bg-white flex flex-col justify-center items-center">
                <img [src]="product.linkImage" alt="" 
                class="object-contain w-[70%] h-[50%]"
                >
                <div class="text-center text-[10px] md:text-sm font-semibold px-7 pb-5">
                  Save up to $400 with
                  Galaxy Watch Ultra
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
































<!-- Table Section -->
<div *ngIf="!(perform.hasError$ | async)" class="max-w-[85rem] py-5 sm:px-6 lg:px-8 lg:py-4 mx-auto">
    <div
    class="px-6 py-2 my-1 border rounded-sm grid gap-3 md:flex md:justify-between md:items-center ">
    <div>
        <h2 class="text-xl font-semibold text-gray-800">
            Products
        </h2>
        <p class="text-sm text-gray-600">
            Add product, edit and more.
        </p>
    </div>
    <div>
        <div class="inline-flex gap-x-2">
            <div class="flex flex-col space-y-2">
                <label for="category" class="font-semibold text-[15px]">Category</label>
                <select (ngModelChange)="changeCategory($event)" [(ngModel)]="categoryName"
                    class="py-2 px-5 pe-20 block w-full bg-gray-100 border-transparent  text-sm outline-none">
                    <option value="">All Categories</option>
                    <option *ngFor="let category of categories()" [value]="category.categoryName">{{
                        category.categoryName }}</option>
                </select>
            </div>

        </div>
    </div>
</div>

<!-- error -->
<div class="grid grid-cols-1 gap-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3">
   <div [@fadeInOut] *ngFor="let product of productsWithPagination()?.data;let index=index" class="items-center border rounded-md shadow-sm flex ">        
   <div class="flex flex-col ">
    <div class="flex items-center relative">
        <div class="basis-[30%]">
            <img [src]="product.linkImage" alt="" loading="lazy">
        </div>

    <div class="flex flex-col basis-[70%] py-2">
        <div class="flex flex-col  line-clamp-2">
          <p class="text-[17px] line-clamp-1 font-semibold text-emerald-900">{{product.name}}</p>
          <p class="text-[12px] text-gray-600 line-clamp-1 font-thin">{{product.description}}</p>
        </div>
        <div class="text-[10px] my-1 px-1"><p>{{product.sku}}</p></div>
        <div class="flex flex-col px-2 py-2">
            <div class="flex items-center text-sm">
                <p class="text-gray-600">Price : </p>
                <p class="font-semibold">{{product.price}}EGP</p>
            </div>
            <div class="flex items-center text-sm">
                <p class="text-gray-600">Brand : </p>
                <p class="font-semibold">{{product.brand}}</p>
            </div>
            <div class="flex items-center text-sm">
                <p class="text-gray-600">Stock : </p>
                <p class="font-semibold">{{product.stockQuantity}}</p>
            </div>
            <div class="flex items-center text-sm">
                <p class="text-gray-600">Discount : </p>
                <p class="font-semibold">{{product.discount}}</p>
            </div>
            <div class="flex items-center text-sm">
                <p class="text-gray-600">OfferEndDate : </p>
                <span class="font-semibold">{{product.offerEndDate | date:'yyyy-MM-dd'}}</span>
            </div>
        </div>
    </div>
     
    <div class="absolute bottom-0 left-0 flex items-center">
        <div class=" flex-col flex justify-center mx-1">
            <button (click)="toggleDropdown(index)"
                class="px-1 rounded-md py-1  text-black"><i
                    class="bx p-2 rounded-full border bx-dots-vertical"></i></button>
            <div [ngClass]="{'hidden ':isDropdownVisible==false || (isDropdownVisible==true && DropdownIndex!=index),
       'block ': DropdownIndex===index
       }" class="relative mt-1 ">
                <ul
                    class=" bg-[#fff] border rounded-lg flex flex-col justify-center py-1  text-black px-5 absolute">
                    <li (click)="delete(product.id)" class="cursor-pointer text-[13px]"><i
                            class=" text-xl bx bx-trash text-blue-600"></i></li>
                    <li class="cursor-pointer text-[13px]"><i
                            class="text-xl text-blue-600 bx bx-edit"></i>
                    </li>
                </ul>
            </div>
        </div>

        <div class=" whitespace-nowrap">
            <div class=" flex items-center justify-center">
                <button (click)="ShowstatusPopup(product.id) " class=""><i
                        class='text-xl  text-gray-700 bx bx-list-plus'></i></button>
            </div>
        </div>
    </div>

    </div>
   </div> 
           
</div>
</div>

<div class="w-full flex items-center py-4 mt-1 px-5 border rounded-md">
    <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
        <div>
            <p class="text-sm text-gray-700">
                Showing
                <span class="font-medium">{{productsWithPagination()?.count}}</span>
                results
            </p>
        </div>
        <div>
            <nav class="isolate inline-flex -space-x-px rounded-md shadow-sm"
                aria-label="Pagination">
                <a href="#"
                    class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                    <span class="sr-only">Previous</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"
                        data-slot="icon">
                        <path fill-rule="evenodd"
                            d="M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z"
                            clip-rule="evenodd" />
                    </svg>
                </a>
                <!-- Current: "z-10 bg-indigo-600 text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600", Default: "text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:outline-offset-0" -->

                <button [ngClass]="{'activePage':currentPage==page}" (click)="goToPage(page)"
                    *ngFor="let page of pages" aria-current="page"
                    class="relative z-10 inline-flex items-center outline-none px-4 py-2 text-sm font-semibold focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">{{page}}</button>
                <button (click)="goToPage(currentPage+1)"
                    class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0">
                    <span class="sr-only">Next</span>
                    <svg class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"
                        data-slot="icon">
                        <path fill-rule="evenodd"
                            d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z"
                            clip-rule="evenodd" />
                    </svg>
                </button>
            </nav>
        </div>
    </div>
</div>
<!-- End Footer -->
<app-loading class="fixed w-full h-full top-0 z-" *ngIf="perform.isLoading$ | async"></app-loading>
<!-- End Table Section -->